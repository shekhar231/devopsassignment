---
# Install dependencies
- name: Install python-software-properties
  apt:
    name: python-software-properties
    state: present

- name: Add Java repository
  apt_repository:
    repo: ppa:webupd8team/java
    state: present

- name: Install JDK
  apt:
    name: default-jdk
    state: present

# Download and extract Maven
- name: Download Apache Maven
  get_url:
    url: http://apache.mirror.digitalpacific.com.au/maven/maven-3/3.3.9/binaries/apache-maven-3.3.9-bin.tar.gz
    dest: /tmp/apache-maven-3.3.9-bin.tar.gz

- name: Extract Apache Maven
  unarchive:
    src: /tmp/apache-maven-3.3.9-bin.tar.gz
    dest: /opt/
    remote_src: yes

# Set Maven alternatives
- name: Configure Maven alternatives
  command: update-alternatives --install /usr/bin/mvn maven /opt/apache-maven-3.3.9/bin/mvn 1001
